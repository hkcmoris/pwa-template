/* Scoped styles for images island: modal, context menu, drag ghost */

#img-modal {
    position: fixed;
    inset: 0;
    z-index: 1000;
}
#img-modal.hidden {
    display: none;
}
#img-modal .overlay {
    position: absolute;
    inset: 0;
    background: rgb(0 0 0 / 60%);
}
#img-modal .dialog {
    position: absolute;
    inset: 10% 5%;
    background: var(--bg);
    border-radius: 0.5rem;
    box-shadow: 0 10px 30px rgb(0 0 0 / 30%);
    padding: 0;
    display: block;
    overflow: hidden;
}
#img-modal[data-kind='preview'] .dialog img {
    position: absolute;
    inset: 0.5rem;
    width: calc(100% - 1rem);
    height: calc(100% - 1rem);
    object-fit: contain;
    object-position: center center;
    display: block;
}
#img-modal[data-kind='small'] .dialog {
    inset: auto;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 1rem;
    width: min(480px, calc(100% - 2rem));
    max-height: calc(100% - 2rem);
    overflow: auto;
}
#img-modal .close {
    z-index: 2;
}
#img-modal .close {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    background: #000;
    color: #fff;
    border: none;
    border-radius: 999px;
    width: 32px;
    height: 32px;
    cursor: pointer;
}

#img-context-menu {
    position: fixed;
    z-index: 1001;
    background: var(--bg);
    border: 1px solid var(--fg);
    border-radius: 0.25rem;
    box-shadow: 0 4px 10px rgb(0 0 0 / 15%);
    min-width: 160px;
    overflow: hidden;
    padding: 0.25rem;
}
#img-context-menu.hidden {
    display: none;
}
#img-context-menu button {
    display: block;
    width: 100%;
    padding: 0.5rem 0.75rem;
    background: transparent;
    color: var(--fg);
    border: none;
    text-align: left;
    cursor: pointer;
    transition:
        background 0.12s ease,
        color 0.12s ease;
    margin: 0.125rem 0;
    border-radius: 0.25rem;
}
#img-context-menu button:hover {
    background: var(--primary);
    color: #fff;
}
#img-context-menu button.hover,
#img-context-menu button:focus {
    background: var(--primary);
    color: #fff;
    outline: none;
}

.drag-ghost {
    position: fixed;
    inset: 0 auto auto 0;
    pointer-events: none;
    user-select: none;
    background: var(--bg, #111);
    color: var(--fg, #fff);
    border: 1px dashed var(--primary, #2563eb);
    border-radius: 0.25rem;
    padding: 0.25rem 0.5rem;
    box-shadow: 0 2px 8px rgb(0 0 0 / 25%);
    transform: translate(-9999px, -9999px);
    will-change: transform;
    white-space: nowrap;
    z-index: 2147483647; /* ensure on top of everything */
    mix-blend-mode: normal;
}

.drag-ghost__content {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}
.drag-ghost__thumb {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    border-radius: 0.25rem;
    background: rgb(0 0 0 / 6%);
}
.drag-ghost__thumb img {
    max-width: 100%;
    max-height: 100%;
    display: block;
}
.drag-ghost__thumb svg {
    width: 32px;
    height: 32px;
    display: block;
}
.drag-ghost__label {
    font-weight: 500;
}

/* Subtle UX hint while dragging */
body.images-dragging {
    cursor: grabbing !important;
}

/* While dragging within the images island, prevent text selection */
body.images-dragging #images-root,
body.images-dragging #images-root * {
    user-select: none;
    user-select: none;
}
